# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üìã **–û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** —Å —Ä–∞–∑–¥–µ–ª—å–Ω—ã–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏:

### **üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **Backend API** - Flask + Gunicorn
2. **Frontend** - Nginx —Å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏
3. **Network** - Docker bridge network

## üê≥ **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:**

### **Backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:**
- **–û–±—Ä–∞–∑**: `yandex-search-backend`
- **–ü–æ—Ä—Ç**: 5000 (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
- **–°–µ—Ä–≤–∏—Å**: Flask API + Gunicorn
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ü–æ–∏—Å–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å API
  - –ü–æ–∏—Å–∫ email –∞–¥—Ä–µ—Å–æ–≤
  - –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏

### **Frontend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:**
- **–û–±—Ä–∞–∑**: `yandex-search-frontend`
- **–ü–æ—Ä—Ç**: 80 (–≤–Ω–µ—à–Ω–∏–π)
- **–°–µ—Ä–≤–∏—Å**: Nginx
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –û—Ç–¥–∞—á–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ (HTML, CSS, JS)
  - Reverse proxy –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
  - –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

## üåê **–°–µ—Ç–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**

```
Internet ‚Üí Frontend (Nginx:80) ‚Üí Backend (Flask:5000)
```

### **–ü–æ—Ç–æ–∫ –∑–∞–ø—Ä–æ—Å–æ–≤:**
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** ‚Üí `http://localhost:80`
2. **Nginx** ‚Üí –æ—Ç–¥–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
3. **API –∑–∞–ø—Ä–æ—Å—ã** ‚Üí `http://localhost:80/api/*`
4. **Nginx** ‚Üí –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –Ω–∞ `backend:5000`
5. **Backend** ‚Üí –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å
6. **–û—Ç–≤–µ—Ç** ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Nginx

## üìÅ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤:**

```
project/
‚îú‚îÄ‚îÄ Dockerfile                 # Backend –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ docker-compose.yml         # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile            # (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
‚îÇ   ‚îú‚îÄ‚îÄ app.py                # Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt      # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ gunicorn.conf.py      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Gunicorn
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile            # Frontend –æ–±—Ä–∞–∑
‚îÇ   ‚îî‚îÄ‚îÄ index.html            # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îî‚îÄ‚îÄ exports/                  # –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
```

## üöÄ **–ö–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞:**

### **–ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:**
```bash
docker-compose up -d
```

### **–¢–æ–ª—å–∫–æ backend:**
```bash
docker-compose up -d backend
```

### **–¢–æ–ª—å–∫–æ frontend:**
```bash
docker-compose up -d frontend
```

## üîç **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:**

### **Backend API:**
```bash
# –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ API (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
docker exec yandex-search-backend curl http://localhost:5000/api/get_status

# –ß–µ—Ä–µ–∑ frontend (–≤–Ω–µ—à–Ω–∏–π)
curl http://localhost:80/api/get_status
```

### **Frontend:**
```bash
# –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
curl http://localhost:80

# Health check
docker exec yandex-search-frontend curl http://localhost:80
```

## üìä **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**

### **‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:**
- **Backend** - —Ç–æ–ª—å–∫–æ API –ª–æ–≥–∏–∫–∞
- **Frontend** - —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
- **Nginx** - —Ç–æ–ª—å–∫–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

### **‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:**
- –ú–æ–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å backend –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ backend –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CDN –¥–ª—è frontend

### **‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- Backend –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ –Ω–∞–ø—Ä—è–º—É—é
- Nginx –∫–∞–∫ reverse proxy
- –ò–∑–æ–ª—è—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

### **‚úÖ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:**
- –ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –û—Ç–¥–µ–ª—å–Ω—ã–µ –æ–±—Ä–∞–∑—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
- –ü—Ä–æ—Å—Ç–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

## üîß **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx:**

```nginx
server {
    listen 80;
    server_name localhost;
    root /usr/share/nginx/html;
    index index.html;
    
    # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # API –∑–∞–ø—Ä–æ—Å—ã
    location /api/ {
        proxy_pass http://backend:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

## üéØ **–î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é:**

- **Frontend**: http://localhost:80
- **API**: http://localhost:80/api/*
- **–°—Ç–∞—Ç—É—Å**: http://localhost:80/api/get_status

## üîÑ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:**

### **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ backend:**
```bash
docker-compose build backend
docker-compose up -d backend
```

### **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ frontend:**
```bash
docker-compose build frontend
docker-compose up -d frontend
```

### **–ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
```bash
docker-compose down
docker-compose build
docker-compose up -d
```

## üìà **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**

```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose ps

# –õ–æ–≥–∏ backend
docker-compose logs backend

# –õ–æ–≥–∏ frontend
docker-compose logs frontend

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats
```

**–≠—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –≥–∏–±–∫–æ—Å—Ç—å, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å!** üéâ
